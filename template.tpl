___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Smartlook Advanced Unofficial",
  "brand": {
    "id": "brand_dummy",
    "displayName": "DumbData",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "This tag is used to implement Smartlook event tracking, identify users, set global event properties, trigger virtual page views, and track custom errors.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "slTagType",
    "displayName": "Tracking Tag Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "slEventTracking",
        "displayValue": "Event Tracking"
      },
      {
        "value": "slIdentify",
        "displayValue": "User Identification"
      },
      {
        "value": "slSetEventProperties",
        "displayValue": "Global Event Properties"
      },
      {
        "value": "slCustomNavEvent",
        "displayValue": "Custom Naviagtion Event"
      },
      {
        "value": "slCustomErrorAPIEvent",
        "displayValue": "Custom Error Tracking"
      }
    ],
    "simpleValueType": true,
    "help": "Select the Smartlook tag type."
  },
  {
    "type": "GROUP",
    "name": "slEventTrackingConfig",
    "displayName": "Smartlook Event Configuration",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "slEventName",
        "displayName": "Smartlook Event Name",
        "simpleValueType": true,
        "help": "Enter the Smartlook event name.",
        "valueHint": "e.g., Viewed Product",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "slEventPropValue",
        "displayName": "Add Smartlook Event Properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Smartlook Property Key",
            "name": "slEventPropertyKey",
            "type": "TEXT",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "valueHint": "e.g.,  productId"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "slEventPropertyValue",
            "type": "TEXT",
            "selectItems": [],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "valueHint": "e.g.,  {{dlv - item_id}}"
          }
        ],
        "newRowButtonText": "Add Event Property"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "slTagType",
        "paramValue": "slEventTracking",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "slIdentifyMethodConfig",
    "displayName": "Visitor Profile Customization",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "SELECT",
        "name": "slUserIdSource",
        "displayName": "Smartlook User ID",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "help": "Select the variable that holds the user ID to be sent to Smartlook.",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "slUserIdCustomizer",
        "displayName": "Add Additional User Metadata",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Identifier Type",
            "name": "slIdentifierType",
            "type": "TEXT",
            "selectItems": [
              {
                "value": "slUserName",
                "displayValue": "Name"
              },
              {
                "value": "slUserEmail",
                "displayValue": "Email"
              },
              {
                "value": "slUserPhone",
                "displayValue": "Phone"
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "valueHint": "e.g., Email"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "slUserMetaDataValue",
            "type": "TEXT",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "valueHint": "e.g., {{ dlv - email}}"
          }
        ],
        "newRowButtonText": "Add User Property"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "slTagType",
        "paramValue": "slIdentify",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "slSetGlobalEventProperties",
    "displayName": "Smartlook Global Event Properties Configuration",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "slGlobalEventPropertyValue",
        "displayName": "Add Smartlook Global Event Properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Property Key",
            "name": "slPagePropKey",
            "type": "TEXT",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "valueHint": "e.g, pageName"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "slPagePropValue",
            "type": "TEXT",
            "selectItems": [],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "valueHint": "e.g, {{ dlv - page title}}"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "newRowButtonText": "Add Page Property"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "slTagType",
        "paramValue": "slSetEventProperties",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "slSetCustomNavigationEvent",
    "displayName": "Smartlook Custom Navigation Configuration",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "slNavigationURLField",
        "displayName": "New Page URL",
        "simpleValueType": true,
        "help": "Enter the new navigation page URL which can either be the full location (URL) of the page or the path portion of a URL. Should start with a slash (/) character.",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "valueHint": "e.g.,  https://example.com/new-url"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "slTagType",
        "paramValue": "slCustomNavEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "slCustomErrorTrack",
    "displayName": "Smartlook Custom Error Configuration",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "slCustomErrorLogField",
        "displayName": "Log Error Message",
        "simpleValueType": true,
        "help": "Enter the error message, either an instance of the error object, or a simple string message.",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "valueHint": "e.g.,  appointment form is broken"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "slTagType",
        "paramValue": "slCustomErrorAPIEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "slDocumentationLinks",
    "displayName": "➡️ Link To Smartlook Documentation",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "LABEL",
        "name": "slDocUserIdentify",
        "displayName": "\u003cstrong\u003e\u003ca href\u003d\"https://web.developer.smartlook.com/docs/identify-visitor\"\u003e👤 User Identify Documentation Link\u003c/a\u003e\u003c/strong\u003e",
        "enablingConditions": [
          {
            "paramName": "slTagType",
            "paramValue": "slIdentify",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "LABEL",
        "name": "slDocEvent",
        "displayName": "\u003cstrong\u003e\u003ca href\u003d\"https://web.developer.smartlook.com/docs/custom-events\"\u003e✅ Event Documentation Link\u003c/a\u003e\u003c/strong\u003e",
        "enablingConditions": [
          {
            "paramName": "slTagType",
            "paramValue": "slEventTracking",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "LABEL",
        "name": "slDocSetGlobalEventProperties",
        "displayName": "\u003cstrong\u003e\u003ca href\u003d\"https://web.developer.smartlook.com/docs/custom-event-properties\"\u003e🎮 Set Global Event Properties Documentation Link\u003c/a\u003e\u003c/strong\u003e",
        "enablingConditions": [
          {
            "paramName": "slTagType",
            "paramValue": "slSetEventProperties",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "LABEL",
        "name": "slDocSetCustomNavigation",
        "displayName": "\u003cstrong\u003e\u003ca href\u003d\"https://web.developer.smartlook.com/docs/custom-navigation-event\"\u003e💻 Custom Navigation Documentation Link\u003c/a\u003e\u003c/strong\u003e",
        "enablingConditions": [
          {
            "paramName": "slTagType",
            "paramValue": "slCustomNavEvent",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "LABEL",
        "name": "slDocCustomErrorLogging",
        "displayName": "\u003cstrong\u003e\u003ca href\u003d\"https://web.developer.smartlook.com/docs/error-logging\"\u003e🛑 Custom Error Logging Documentation Link\u003c/a\u003e\u003c/strong\u003e",
        "enablingConditions": [
          {
            "paramName": "slTagType",
            "paramValue": "slCustomErrorAPIEvent",
            "type": "EQUALS"
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "slOptionalConfig",
    "displayName": "Optional Configuration",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "disableConsoleLogging",
        "checkboxText": "Disable Console Logging",
        "simpleValueType": true,
        "help": "Turn on this option if you prefer not to log this information in the browser console."
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const createArgumentsQueue = require('createArgumentsQueue');
const makeString = require('makeString');
const makeTableMap = require('makeTableMap');
const getType = require('getType');
const logToConsole = require('logToConsole');
const ObjectAPI = require('Object');

const SL = createArgumentsQueue('smartlook', 'smartlook.q');
const tagType = data.slTagType;
const loggingEnabled = !data.disableConsoleLogging;

// Utility to safely fetch a key-value map from a simple table
function getMappedProperties(table, keyField, valueField) {
  return getType(table) === 'array' ? makeTableMap(table, keyField, valueField) : {};
}

// ---- 1. Event Tracking ----
if (tagType === 'slEventTracking') {
  const eventName = makeString(data.slEventName);
  if (!eventName) return;

  const eventProperties = getMappedProperties(data.slEventPropValue, 'slEventPropertyKey', 'slEventPropertyValue');

  if (ObjectAPI.keys(eventProperties).length > 0) {
    SL('track', eventName, eventProperties);
    if (loggingEnabled) logToConsole('Smartlook event tracked with properties:', eventName, eventProperties);
  } else {
    SL('track', eventName);
    if (loggingEnabled) logToConsole('Smartlook event tracked without properties:', eventName);
  }
}

// ---- 2. User Identification ----
else if (tagType === 'slIdentify') {
  const userId = makeString(data.slUserIdSource);
  if (!userId) return;

  const userProperties = getMappedProperties(data.slUserIdCustomizer, 'slIdentifierType', 'slUserMetaDataValue');

  if (ObjectAPI.keys(userProperties).length > 0) {
    SL('identify', userId, userProperties);
    if (loggingEnabled) logToConsole('Smartlook user identified with metadata:', userId, userProperties);
  } else {
    SL('identify', userId);
    if (loggingEnabled) logToConsole('Smartlook user identified without metadata:', userId);
  }
}

// ---- 3. Global Event Properties ----
else if (tagType === 'slSetEventProperties') {
  const globalProps = getMappedProperties(data.slGlobalEventPropertyValue, 'slPagePropKey', 'slPagePropValue');

  if (ObjectAPI.keys(globalProps).length > 0) {
    SL('properties', globalProps);
    if (loggingEnabled) logToConsole('Smartlook global event properties set:', globalProps);
  }
}

// ---- 4. Custom Navigation Event ----
else if (tagType === 'slCustomNavEvent') {
  const navURL = makeString(data.slNavigationURLField);
  if (!navURL) return;

  SL('navigation', navURL);
  if (loggingEnabled) logToConsole('Smartlook custom navigation triggered:', navURL);
}

// ---- 5. Custom Error Logging ----
else if (tagType === 'slCustomErrorAPIEvent') {
  const errorMessage = makeString(data.slCustomErrorLogField);
  if (!errorMessage) return;

  SL('error', errorMessage);
  if (loggingEnabled) logToConsole('Smartlook error logged:', errorMessage);
}

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "smartlook"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "smartlook.q"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Quick Test
  code: runCode();
setup: ''


___NOTES___

Created on 3/1/2025, 4:06:51 PM


